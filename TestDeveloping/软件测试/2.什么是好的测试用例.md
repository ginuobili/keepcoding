[toc]

### 什么才算是“好的”测试用例？

通常，第一反应很可能会是“发现了软件缺陷的测试用例就是好的用例”，可是“如果说测试用例发现了缺陷就是好用例，那么在该缺陷被修复后，同样的用例难道就不是好用例了吗？”。

可能还会说“发现软件缺陷可能性大的测试用例就是好用例”，看起来还是蛮有道理的，但是同样地，“打算用什么方法来量化测试用例发现缺陷的可能性？”。

这就有点像“傻子吃烧饼”，连吃五个不饱，吃完第六个终于饱了，于是他说：早知道吃了第六个就会饱，何必吃前面五个呢。细想，他吃的六个烧饼其实是一个整体，一起吃下去才会饱，而你无法找到吃一个就能饱的“好”烧饼。

**“好的”测试用例一定是一个完备的集合，它能够覆盖所有 等价类、各种边界值，而跟能否发现缺陷无关。**

如果把被测试软件看作一个池塘，软件缺陷是池塘中的鱼，建立测试用例集的过程就像是在编织一张捕渔网。“好的”测试用例集就是一张能够覆盖整个池塘的大渔网，只要池塘里有鱼，这个大渔网就一定能把鱼给捞上来。如果渔网本身是完整的且合格的，那么捞不到鱼，就证明池塘中没有鱼，而渔网的好坏与池塘中是否有鱼无关。

---

### “好的”测试用例必须具备的特征：

1. 整体完备性： “好的”测试用例一定是一个完备的整体，是有效测试用例组成的集合，能够完全覆盖测试需求。
2. 等价类划分的准确性： 指的是对于每个等价类都能保证只要其中一个输入测试通过，其他输入也一定测试通过。
3. 等价类集合的完备性： 需要保证所有可能的边界值和边界条件都已经正确识别。

---

### 三种最常用的测试用例设计方法

设计用例的方法有很多，比如等价类划分法、边界值分析法、错误推测方法、因果图方法、判定表驱动分析法、正交实验设计方法、功能图分析方法、场景设计方法、形式化方法、扩展有限状态机方法等等，但是从软件企业实际的工程实践来讲，真正具有实用价值并且常用的只有前三种方法。

对大多数的软件测试而言，综合使用**等价类划分**、**边界值分析**和**错误推测**这三大类方法就足够了。

**等价类划分方法**

只要从每个等价类中任意选取一个值进行测试，就可以用少量具有代表性的测试输入取得较好的测试覆盖结果。等价类划分方法的另一个关键点是要找出所有“无效等价类”。

举例：学生信息系统中有一个“考试成绩”的输入项，成绩的取值范围是 0~100 之间的整数，考试成绩及格的分数线是 60。设计的测试用例为：

- 有效等价类 1：0~59 之间的任意整数；
- 有效等价类 2：59~100 之间的任意整数；
- 无效等价类 1：小于 0 的负数；
- 无效等价类 2：大于 100 的整数；
- 无效等价类 3：0~100 之间的任何浮点数；
- 无效等价类 4：其他任意非数字字符。

**边界值分析方法**

边界值分析是对等价类划分的补充，从工程实践经验中可以发现，大量的错误发生在输入输出的边界值上，所以需要对边界值进行重点测试，通常选取正好等于、刚刚大于或刚刚小于边界的值作为测试数据。

继续看学生信息系统中“考试成绩”的例子，选取的边界值数据应该包括：-1，0，1，59，60，61，99，100，101。

**错误推测方法**

错误推测方法是指基于对被测试软件系统设计的理解、过往经验以及个人直觉，推测出软件可能存在的缺陷，从而有针对性地设计测试用例的方法。这个方法强调的是对被测试软件的需求理解以及设计实现的细节把握，当然还有个人的能力。错误推测法和目前非常流行的“探索式测试方法”的基本思想和理念

错误推测法和目前非常流行的“**探索式测试方法**”的基本思想和理念是不谋而合的，这类方法在目前的敏捷开发模式下的投入产出比很高，因此被广泛应用。但是，这个方法的缺点也显而易见，那就是难以系统化，并且过度依赖个人能力。

在软件企业的具体实践中，为了降低对个人能力的依赖，通常会建立常见缺陷知识库，在测试设计的过程中，会使用缺陷知识库作为**检查点列表（checklist）**，去帮助优化补充测试用例的设计。

除此，还有建立一个简单的 wiki 页面，让测试工程师完成测试用例的最初设计后对应这个 wiki 页面先做一轮自检，如果在后续测试中发现了新的点，就会继续完善这个 wiki 页面。

---

### 用例设计的其他经验

深入理解被测软件需求的最好方法是，测试工程师在**需求分析和设计阶段**就开始介入，因为这个阶段是**理解和掌握软件的原始业务需求的最好时机**。

只有真正理解了原始业务需求之后，才有可能从业务需求的角度去设计针对性明确、从终端用户使用场景考虑的端到端（End-2-End）的测试用例集。这个阶段的测试用例设计，主要目的是验证各个业务需求是否被满足，主要采用基于黑盒的测试设计方法。

在具体的用例设计时，首先需要搞清楚每一个业务需求所对应的多个软件功能需求点，然后分析出每个软件功能需求点对应的多个测试需求点，最后再针对每个测试需求点设计测试用例。

1. 只有深入理解被测试软件的架构，才能设计出“有的放矢”的测试用例集，去发现系统边界以及系统集成上的潜在缺陷。
2. 必须深入理解被测软件的设计与实现细节，深入理解软件内部的处理逻辑。
3. 需要引入需求覆盖率和代码覆盖率来衡量测试执行的完备性，并以此为依据来找出遗漏的测试点。